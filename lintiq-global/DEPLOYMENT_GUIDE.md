# LintIQ Global Deployment Guide

## 🚀 Quick Deployment to Render

### Prerequisites
- GitHub account
- Render account (free tier available)
- OpenAI API key
- Optional: Payment gateway credentials

### Step 1: Prepare Repository

1. **Fork or Upload to GitHub**
   ```bash
   # If you have the code locally
   git init
   git add .
   git commit -m "Initial LintIQ Global deployment"
   git remote add origin https://github.com/yourusername/lintiq-global.git
   git push -u origin main
   ```

2. **Verify Repository Structure**
   ```
   lintiq-global/
   ├── backend/
   ├── frontend/
   ├── render.yaml
   ├── README.md
   └── .env.example
   ```

### Step 2: Deploy to Render

1. **Create Render Account**
   - Visit: https://render.com
   - Sign up with GitHub account

2. **Create New Web Service**
   - Click "New +" → "Web Service"
   - Connect your GitHub repository
   - Select `lintiq-global` repository

3. **Configure Service**
   - **Name**: `lintiq-global` (or your preferred name)
   - **Environment**: `Python`
   - **Build Command**: (Auto-detected from render.yaml)
   - **Start Command**: (Auto-detected from render.yaml)

### Step 3: Set Environment Variables

In Render dashboard, add these environment variables:

#### Required Variables
```bash
# OpenAI Configuration (Required for AI features)
OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# Flask Configuration (Auto-generated by Render)
SECRET_KEY=auto-generated-by-render
```

#### Optional Variables (for enhanced payment processing)
```bash
# DPO Group Configuration (for African markets)
DPO_COMPANY_TOKEN=your-dpo-company-token
DPO_SERVICE_TYPE=3854
DPO_API_URL=https://secure.3gdirectpay.com

# Stripe Configuration (for global markets)
STRIPE_PUBLISHABLE_KEY=pk_live_your-stripe-key
STRIPE_SECRET_KEY=sk_live_your-stripe-secret
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret

# Flask Environment
FLASK_ENV=production
PORT=5000
```

### Step 4: Deploy

1. **Start Deployment**
   - Click "Create Web Service"
   - Render will automatically start building

2. **Monitor Build Process**
   - Build time: ~10-15 minutes
   - Watch logs for any errors
   - Build includes both backend and frontend

3. **Verify Deployment**
   - Your app will be available at: `https://your-app-name.onrender.com`
   - Check health endpoint: `https://your-app-name.onrender.com/health`

## 🔑 API Keys Setup

### OpenAI API Key

1. **Create OpenAI Account**
   - Visit: https://platform.openai.com
   - Sign up and verify email

2. **Add Payment Method**
   - Go to Billing → Payment methods
   - Add credit card (required for API access)
   - Add initial credit ($5-10 recommended)

3. **Generate API Key**
   - Go to API Keys section
   - Click "Create new secret key"
   - Copy key (starts with `sk-proj-`)
   - Add to Render environment variables

4. **Cost Estimation**
   - GPT-4o-mini: ~$0.01-0.02 per analysis
   - 1000 analyses ≈ $10-20
   - High profit margins with USD pricing

### Payment Gateway Setup (Optional)

#### Option 1: DPO Group (Recommended for African markets)

1. **Contact DPO Group**
   - **Website**: https://dpogroup.com
   - **Email**: info@dpogroup.com
   - **Coverage**: Africa, Middle East, Asia

2. **Required Information**
   - Business registration details
   - Bank account information
   - Expected transaction volume

3. **Get Credentials**
   - **Company Token**: Unique identifier
   - **Service Type**: Usually 3854
   - **API URL**: https://secure.3gdirectpay.com

#### Option 2: Stripe (Global markets)

1. **Create Stripe Account**
   - Visit: https://stripe.com
   - Sign up and verify business details

2. **Get API Keys**
   - Dashboard → Developers → API keys
   - Copy Publishable and Secret keys
   - Set up webhook endpoints

3. **Configure Webhooks**
   - Endpoint URL: `https://your-app.onrender.com/api/payments/webhook`
   - Events: `payment_intent.succeeded`, `payment_intent.payment_failed`

## 🧪 Testing Deployment

### 1. Health Check
```bash
curl https://your-app.onrender.com/health
```

Expected response:
```json
{
  "status": "healthy",
  "service": "LintIQ Global API",
  "version": "1.0.0",
  "features": {
    "authentication": true,
    "code_analysis": true,
    "ai_insights": true,
    "payments": true,
    "database": true
  }
}
```

### 2. Demo Login
```bash
curl -X POST https://your-app.onrender.com/api/auth/demo
```

### 3. Frontend Access
- Visit: `https://your-app.onrender.com`
- Should show LintIQ Global landing page
- Test demo login button
- Verify dashboard access

### 4. Payment Testing
- Test credit purchase flow
- Verify payment processing
- Check webhook handling

## 🔧 Troubleshooting

### Common Build Issues

#### 1. Frontend Build Fails
```bash
# Check if pnpm is installed correctly
npm install -g pnpm

# Verify package.json exists
ls frontend/package.json

# Check build command
cd frontend && pnpm run build
```

#### 2. Backend Dependencies Fail
```bash
# Check requirements.txt
cat backend/requirements.txt

# Test local installation
cd backend && pip install -r requirements.txt
```

#### 3. Static Files Not Served
```bash
# Verify frontend build copied to backend
ls backend/src/static/

# Should contain: index.html, assets/
```

### Runtime Issues

#### 1. 500 Internal Server Error
- Check Render logs for Python errors
- Verify environment variables are set
- Check database initialization

#### 2. API Endpoints Return 404
- Verify Flask routes are registered
- Check URL patterns in frontend
- Ensure CORS is configured

#### 3. Payment Failures
- Verify payment gateway credentials
- Check webhook URL configuration
- Test with sandbox/test environment

### Performance Issues

#### 1. Slow Response Times
- Check OpenAI API latency
- Monitor database query performance
- Consider upgrading Render plan

#### 2. Build Timeouts
- Optimize frontend dependencies
- Use build caching
- Consider splitting build steps

## 📊 Monitoring

### Render Dashboard
- **Metrics**: CPU, memory, response times
- **Logs**: Real-time application logs
- **Events**: Deployment history
- **Health Checks**: Automatic monitoring

### Application Monitoring
```bash
# Health endpoint
GET /health

# API status
GET /api

# User statistics
GET /api/user/stats (authenticated)
```

### Payment Monitoring
- Payment gateway dashboards
- Transaction success rates
- Failed payment analysis
- Revenue tracking

## 🔄 Updates and Maintenance

### Code Updates
1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Update feature"
   git push origin main
   ```

2. **Auto-Deploy**
   - Render automatically deploys on push
   - Monitor build logs
   - Verify deployment success

### Environment Updates
1. **Update Variables**
   - Go to Render dashboard
   - Environment tab
   - Update values
   - Restart service

### Database Maintenance
- SQLite database persists across deployments
- Consider PostgreSQL for production scale
- Regular backups recommended

## 🌍 Scaling for Global Market

### Initial Launch (0-100 users)
- **Render Plan**: Starter ($7/month)
- **OpenAI Budget**: $20-50/month
- **Payment Gateway**: Basic setup
- **Support**: Email-based

### Growth Phase (100-1000 users)
- **Render Plan**: Standard ($25/month)
- **OpenAI Budget**: $100-300/month
- **Payment Gateway**: Volume discounts
- **Support**: Live chat integration

### Scale Phase (1000+ users)
- **Render Plan**: Pro ($85/month)
- **OpenAI Budget**: $500-1500/month
- **Payment Gateway**: Enterprise agreement
- **Support**: Dedicated support team

## 💡 Optimization Tips

### Cost Optimization
- Monitor OpenAI usage patterns
- Implement caching for repeated analyses
- Optimize AI prompts for efficiency
- Use payment gateway volume discounts

### Performance Optimization
- Enable frontend caching
- Optimize database queries
- Use CDN for static assets
- Implement request rate limiting

### User Experience
- Add loading indicators
- Implement error boundaries
- Provide clear error messages
- Add offline support

## 🎯 Success Metrics

### Technical Metrics
- **Uptime**: >99.9%
- **Response Time**: <2 seconds
- **Build Time**: <15 minutes
- **Error Rate**: <1%

### Business Metrics
- **User Registration**: Track signups
- **Credit Purchases**: Monitor revenue
- **Analysis Usage**: Feature adoption
- **Customer Support**: Response times

### Global Market Metrics
- **Geographic Distribution**: User locations
- **Payment Method Preferences**: Optimize offerings
- **Language Usage**: Popular programming languages
- **Feature Adoption**: AI vs basic analysis

## 🌟 Advanced Features

### Multi-Region Deployment
- Deploy to multiple Render regions
- Use CDN for global content delivery
- Implement geo-routing for performance

### Enterprise Features
- SSO integration
- Custom branding
- Advanced analytics
- Dedicated support

### API Integration
- Webhook support for CI/CD
- REST API for third-party integrations
- SDK development for popular languages

---

**Your LintIQ Global application is ready for worldwide deployment!** 🌍

For additional support, contact: [support@lintiq.com](mailto:support@lintiq.com)

